# ==============================================================================
# Environment Configuration for Canada.ca Chat Agent
# ==============================================================================
# Copy this file to .env and fill in your values
# 
# This file supports multiple deployment scenarios:
#   - Local development (Docker-based PostgreSQL/Redis)
#   - Cloud development (Neon + Upstash - free tiers)
#   - Production (AWS RDS + ElastiCache)
# ==============================================================================

# ===================
# General Settings
# ===================
ENVIRONMENT=development
DEBUG=true

# ===================
# API Settings
# ===================
API_HOST=0.0.0.0
API_PORT=8000

# ===================
# LLM Provider Settings
# ===================
# Options: azure_openai, openai, anthropic, aws_bedrock
LLM_PROVIDER=aws_bedrock

# Azure OpenAI (Canada East region)
AZURE_OPENAI_ENDPOINT=https://your-resource.openai.azure.com/
AZURE_OPENAI_API_KEY=your-api-key
AZURE_OPENAI_DEPLOYMENT_NAME=gpt-4o
AZURE_OPENAI_EMBEDDING_DEPLOYMENT=text-embedding-3-large
AZURE_OPENAI_API_VERSION=2024-02-01

# OpenAI Direct (Alternative)
OPENAI_API_KEY=sk-your-openai-key

# Anthropic (Alternative)
ANTHROPIC_API_KEY=your-anthropic-key

# AWS Bedrock (Recommended - supports multiple models)
# Credentials are loaded via boto3 credential chain:
#   1. Environment variables: AWS_ACCESS_KEY_ID, AWS_SECRET_ACCESS_KEY
#   2. AWS credentials file (~/.aws/credentials)
#   3. IAM role (for EC2/Lambda)
AWS_REGION=ca-central-1
# Chat models: 
#   - anthropic.claude-3-haiku-20240307-v1:0 (Claude 3 Haiku - fast & cost-effective)
#   - anthropic.claude-3-5-sonnet-20241022-v2:0 (Claude 3.5 Sonnet - best reasoning)
#   - anthropic.claude-3-opus-20240229-v1:0 (Claude 3 Opus - most capable)
AWS_BEDROCK_MODEL_ID=anthropic.claude-3-haiku-20240307-v1:0
# Embedding models:
#   - amazon.titan-embed-text-v2:0 (1024 dimensions) - Recommended
#   - amazon.titan-embed-text-v1 (1536 dimensions)
#   - cohere.embed-multilingual-v3 (1024 dim, requires Marketplace subscription)
AWS_BEDROCK_EMBEDDING_MODEL_ID=amazon.titan-embed-text-v2:0

# ===================
# Database Settings (AWS Aurora PostgreSQL)
# ===================
# PostgreSQL with pgvector extension
# Format: postgresql+asyncpg://user:password@host:port/database
#
# AWS Aurora PostgreSQL Serverless v2 (Recommended for development)
# - Supports pgvector extension
# - Auto-scales from 0.5 to 16 ACUs
# - ~$0.12/ACU-hour in ca-central-1
#
# Setup steps:
# 1. Create Aurora Serverless v2 cluster in AWS Console
# 2. Choose PostgreSQL 15.x compatible
# 3. Enable pgvector: CREATE EXTENSION vector;
# 4. Create database: CREATE DATABASE canadaca;
#
# Connection string format:
DATABASE_URL=postgresql+asyncpg://postgres:your-password@your-cluster.cluster-xxxxx.ca-central-1.rds.amazonaws.com:5432/canadaca

# ===================
# Redis Settings (AWS ElastiCache)
# ===================
# Used for caching and rate limiting
#
# AWS ElastiCache for Redis (cache.t3.micro = ~$12/month)
# - Or ElastiCache Serverless for pay-per-use
#
# Setup steps:
# 1. Create ElastiCache Redis cluster (cache.t3.micro for cheapest)
# 2. Use same VPC as Aurora
# 3. Configure security group to allow port 6379
#
# Connection string format (no auth for VPC-internal):
REDIS_URL=redis://your-cluster.xxxxx.cache.amazonaws.com:6379
#
# With auth token (recommended for production):
# REDIS_URL=redis://:your-auth-token@your-cluster.xxxxx.cache.amazonaws.com:6379

# ===================
# Security Settings
# ===================
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW_SECONDS=3600

# Azure Content Safety (Optional - for output moderation)
AZURE_CONTENT_SAFETY_ENDPOINT=
AZURE_CONTENT_SAFETY_KEY=

# ===================
# Observability
# ===================
# LangSmith (LLM Tracing) - Optional
# Sign up at: https://smith.langchain.com
LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=your-langsmith-key
LANGCHAIN_PROJECT=canadaca-chat

# Application Insights (Azure) - Optional
APPLICATIONINSIGHTS_CONNECTION_STRING=

# ===================
# Scraper Settings
# ===================
SCRAPER_RATE_LIMIT_SECONDS=1.0
SCRAPER_USER_AGENT=Canada.ca-ChatBot/1.0
